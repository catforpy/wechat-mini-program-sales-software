# æ¨¡æ¿ä¸­å¿ƒå¼€å‘æ–‡æ¡£

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**å¼€å‘æ—¥æœŸ**ï¼š2026-02-08
**å¼€å‘è€…**ï¼šå¼€å‘å›¢é˜Ÿ

---

## ä¸€ã€åŠŸèƒ½æ¦‚è¿°

### 1.1 æ¨¡å—ä»‹ç»

æ¨¡æ¿ä¸­å¿ƒæ˜¯å°ç¨‹åºçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œå•†æˆ·å¯ä»¥æµè§ˆã€æœç´¢ã€æ”¶è—å„ç±»å°ç¨‹åºæ¨¡æ¿ï¼Œä»£ç†å•†å¯ä»¥æŸ¥çœ‹å’Œç®¡ç†è‡ªå·±çš„æ¨¡æ¿ã€‚

### 1.2 æ ¸å¿ƒåŠŸèƒ½

- âœ… åˆ†ç±»æµè§ˆï¼ˆä¸€çº§åˆ†ç±»ã€äºŒçº§åˆ†ç±»ï¼‰
- âœ… æ¨¡æ¿æœç´¢ï¼ˆæŒ‰åç§°ã€æ ‡ç­¾ã€åˆ†ç±»ï¼‰
- âœ… æ¨¡æ¿åˆ—è¡¨å±•ç¤ºï¼ˆå¡ç‰‡å¼å¸ƒå±€ï¼‰
- âœ… æ¨¡æ¿è¯¦æƒ…æŸ¥çœ‹
- âœ… æ”¶è—åŠŸèƒ½ï¼ˆå•†æˆ·ç«¯ä¸“å±ï¼‰
- âœ… è§’è‰²æƒé™æ§åˆ¶ï¼ˆä»£ç†å•†/å•†æˆ·/ç®¡ç†å‘˜ï¼‰

---

## äºŒã€æ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ template/
â”‚       â”œâ”€â”€ index.vue                    # æ¨¡æ¿ä¸­å¿ƒä¸»é¡µï¼ˆæ–°å»ºï¼‰
â”‚       â””â”€â”€ detail/
â”‚           â””â”€â”€ index.vue                # æ¨¡æ¿è¯¦æƒ…é¡µï¼ˆä¿®æ”¹ï¼‰
â”‚
â”œâ”€â”€ components/
â”‚   â””â”€â”€ template/
â”‚       â”œâ”€â”€ TemplateCard.vue             # æ¨¡æ¿å¡ç‰‡ç»„ä»¶ï¼ˆæ–°å»ºï¼‰
â”‚       â”œâ”€â”€ CategoryBar.vue              # ä¸€çº§åˆ†ç±»æ ç»„ä»¶ï¼ˆæ–°å»ºï¼‰
â”‚       â””â”€â”€ CategoryTags.vue             # äºŒçº§åˆ†ç±»æ ‡ç­¾ç»„ä»¶ï¼ˆæ–°å»ºï¼‰
â”‚
â”œâ”€â”€ mock/
â”‚   â”œâ”€â”€ templateCategories.ts            # åˆ†ç±»å‡æ•°æ®ï¼ˆæ–°å»ºï¼‰
â”‚   â””â”€â”€ templateList.ts                  # æ¨¡æ¿åˆ—è¡¨å‡æ•°æ®ï¼ˆæ–°å»ºï¼‰
â”‚
â””â”€â”€ types/
    â””â”€â”€ template.ts                      # ç±»å‹å®šä¹‰ï¼ˆæ–°å»ºï¼‰
```

---

## ä¸‰ã€æ–°å¢æ–‡ä»¶è¯´æ˜

### 3.1 ç±»å‹å®šä¹‰æ–‡ä»¶

**æ–‡ä»¶è·¯å¾„**ï¼š[src/types/template.ts](../src/types/template.ts)

**ä¸»è¦å†…å®¹**ï¼š
```typescript
// ç”¨æˆ·è§’è‰²æšä¸¾
export enum UserRole {
  AGENT = 'agent',         // ä»£ç†å•†
  MERCHANT = 'merchant',   // å•†æˆ·
  ADMIN = 'admin'          // ç®¡ç†å‘˜
}

// åˆ†ç±»æ¥å£
export interface Category {
  id: string
  name: string
  icon?: string
  level: 1 | 2
  hasData: boolean          // æ˜¯å¦æœ‰æ¨¡æ¿æ•°æ®
  templateCount?: number
  children?: SecondaryCategory[]
}

// æ¨¡æ¿æ¥å£
export interface Template {
  id: number
  name: string
  categoryId: string
  categoryPath: string
  price: number
  rating: number
  salesCount: number
  thumbnail: string
  tags: string[]
  agentName?: string
  agentId?: number
  isCollected?: boolean     // æ˜¯å¦å·²æ”¶è—ï¼ˆå•†æˆ·ç«¯ï¼‰
  updatedAt?: string
}
```

**è®¾è®¡è¦ç‚¹**ï¼š
- ä½¿ç”¨ `hasData` æ ‡è®°åˆ†ç±»æ˜¯å¦æœ‰æ•°æ®ï¼Œé¿å…æ˜¾ç¤ºç©ºåˆ†ç±»
- `isCollected` å­—æ®µä»…åœ¨å•†æˆ·ç«¯ä½¿ç”¨
- `categoryPath` ç”¨äºæ˜¾ç¤ºå®Œæ•´çš„åˆ†ç±»å±‚çº§

---

### 3.2 åˆ†ç±»å‡æ•°æ®

**æ–‡ä»¶è·¯å¾„**ï¼š[src/mock/templateCategories.ts](../src/mock/templateCategories.ts)

**æ•°æ®ç»“æ„**ï¼š
```typescript
export const allCategories: Category[] = [
  {
    id: 'ecommerce',
    name: 'ç»¼åˆç”µå•†',
    icon: 'ğŸ›’',
    level: 1,
    hasData: true,
    templateCount: 8,
    children: [
      { id: 'ecommerce-platform', name: 'ç”µå•†å¹³å°', hasData: true, templateCount: 5 },
      { id: 'cross-border', name: 'è·¨å¢ƒç”µå•†', hasData: true, templateCount: 3 },
      { id: 'live-commerce', name: 'ç›´æ’­å¸¦è´§', hasData: false, templateCount: 0 }
    ]
  },
  // ... æ›´å¤šåˆ†ç±»
]
```

**æ ¸å¿ƒæ–¹æ³•**ï¼š
- `getValidCategories()`ï¼šè¿‡æ»¤å‡ºæœ‰æ•°æ®çš„åˆ†ç±»ï¼ˆæ¨¡æ‹Ÿåç«¯è¿”å›ï¼‰
- `getPrimaryCategories()`ï¼šè·å–ä¸€çº§åˆ†ç±»ï¼ˆåŒ…å«"å…¨éƒ¨"é€‰é¡¹ï¼‰
- `getSecondaryCategories(primaryId)`ï¼šæ ¹æ®ä¸€çº§åˆ†ç±»IDè·å–äºŒçº§åˆ†ç±»

**å‡æ•°æ®èŒƒå›´**ï¼š
- âœ… ç»¼åˆç”µå•†ï¼ˆç”µå•†å¹³å°ã€è·¨å¢ƒç”µå•†ï¼‰
- âœ… å¨±ä¹ï¼ˆè§†é¢‘å¨±ä¹ï¼‰
- âœ… ITç§‘æŠ€ï¼ˆè½¯ä»¶æœåŠ¡ã€ç½‘ç«™æœåŠ¡ï¼‰
- âŒ ç‰©æµæœåŠ¡ã€æ•™è‚²æœåŠ¡ã€åŒ»ç–—ï¼ˆæ— æ•°æ®ï¼Œä¸æ˜¾ç¤ºï¼‰

---

### 3.3 æ¨¡æ¿åˆ—è¡¨å‡æ•°æ®

**æ–‡ä»¶è·¯å¾„**ï¼š[src/mock/templateList.ts](../src/mock/templateList.ts)

**æ•°æ®æ€»æ•°**ï¼š16ä¸ªæ¨¡æ¿

**ä»·æ ¼åˆ†å¸ƒ**ï¼š
- Â¥1298 - Â¥5998
- ä¸åŒåˆ†ç±»æœ‰ä¸åŒä»·æ ¼åŒºé—´

**æ ¸å¿ƒæ–¹æ³•**ï¼š
```typescript
// æ ¹æ®ç­›é€‰æ¡ä»¶è·å–æ¨¡æ¿åˆ—è¡¨
export const getTemplates = (params: {
  categoryId?: string      // åˆ†ç±»ID
  keyword?: string         // æœç´¢å…³é”®è¯
  page?: number
  pageSize?: number
  sortBy?: 'price' | 'rating' | 'sales' | 'newest'
}) => {
  // 1. æ ¹æ®åˆ†ç±»IDç­›é€‰
  // 2. æ ¹æ®å…³é”®è¯æœç´¢
  // 3. æ’åº
  // 4. åˆ†é¡µ
  return { templates, total, page, pageSize, hasMore }
}
```

**æœç´¢æ”¯æŒ**ï¼š
- æ¨¡æ¿åç§°
- åˆ†ç±»è·¯å¾„
- æ ‡ç­¾

---

### 3.4 æ¨¡æ¿å¡ç‰‡ç»„ä»¶

**æ–‡ä»¶è·¯å¾„**ï¼š[src/components/template/TemplateCard.vue](../src/components/template/TemplateCard.vue)

**Props**ï¼š
```typescript
interface Props {
  template: Template
  userRole?: 'agent' | 'merchant' | 'admin'  // ç”¨æˆ·è§’è‰²
  showAgent?: boolean  // æ˜¯å¦æ˜¾ç¤ºä»£ç†å•†ä¿¡æ¯
}
```

**Events**ï¼š
- `@click`ï¼šç‚¹å‡»å¡ç‰‡
- `@collect`ï¼šæ”¶è—/å–æ¶ˆæ”¶è—

**UIè®¾è®¡**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“· [ç¼©ç•¥å›¾]           â¤ï¸/ğŸ¤    â”‚
â”‚  ç”µå•†å•†åŸæ¨¡æ¿                    â”‚
â”‚  ç»¼åˆç”µå•† > ç”µå•†å¹³å°              â”‚
â”‚  [å•†å“ç®¡ç†] [æ”¯ä»˜ç³»ç»Ÿ] [ä¼šå‘˜ç®¡ç†] â”‚
â”‚  ğŸ’²1798   â­4.9   ğŸ“¦25           â”‚
â”‚  ä»£ç†å•†ï¼šå°å¼                      â”‚  ï¼ˆå¯é€‰æ˜¾ç¤ºï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è§’è‰²é€‚é…**ï¼š
- å•†æˆ·ç«¯ï¼šæ˜¾ç¤ºæ”¶è—æŒ‰é’®
- ä»£ç†å•†ç«¯ï¼šä¸æ˜¾ç¤ºæ”¶è—æŒ‰é’®

---

### 3.5 ä¸€çº§åˆ†ç±»æ ç»„ä»¶

**æ–‡ä»¶è·¯å¾„**ï¼š[src/components/template/CategoryBar.vue](../src/components/template/CategoryBar.vue)

**Props**ï¼š
```typescript
interface Props {
  categories: Category[]  // ä¸€çº§åˆ†ç±»åˆ—è¡¨
  modelValue: string      // å½“å‰é€‰ä¸­çš„åˆ†ç±»IDï¼ˆv-modelï¼‰
}
```

**UIè®¾è®¡**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ“¦ å…¨éƒ¨] [ğŸ›’ ç»¼åˆç”µå•†] [ğŸ® å¨±ä¹] ... â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‰¹ç‚¹**ï¼š
- æ¨ªå‘æ»šåŠ¨
- æ¸å˜è‰²é«˜äº®é€‰ä¸­é¡¹
- æ˜¾ç¤ºæ•°é‡å¾½ç« 
- ä½¿ç”¨ `v-model` åŒå‘ç»‘å®š

---

### 3.6 äºŒçº§åˆ†ç±»æ ‡ç­¾ç»„ä»¶

**æ–‡ä»¶è·¯å¾„**ï¼š[src/components/template/CategoryTags.vue](../src/components/template/CategoryTags.vue)

**Props**ï¼š
```typescript
interface Props {
  categories: SecondaryCategory[]  // äºŒçº§åˆ†ç±»åˆ—è¡¨
  modelValue: string               // å½“å‰é€‰ä¸­çš„åˆ†ç±»IDï¼ˆv-modelï¼‰
}
```

**UIè®¾è®¡**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ç”µå•†å¹³å°(5)] [è·¨å¢ƒç”µå•†(3)] [ç›´æ’­å¸¦è´§] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‰¹ç‚¹**ï¼š
- æ¨ªå‘æ»šåŠ¨
- æ— æ•°æ®çš„åˆ†ç±»ç½®ç°ä¸å¯ç‚¹å‡»
- æ˜¾ç¤ºæ¨¡æ¿æ•°é‡
- ä½¿ç”¨ `v-model` åŒå‘ç»‘å®š

---

### 3.7 æ¨¡æ¿ä¸­å¿ƒä¸»é¡µ

**æ–‡ä»¶è·¯å¾„**ï¼š[src/pages/template/index.vue](../src/pages/template/index.vue)

**é¡µé¢ç»“æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” æœç´¢æ¨¡æ¿                              â”‚  æœç´¢æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ“¦ å…¨éƒ¨] [ğŸ›’ ç»¼åˆç”µå•†] [ğŸ® å¨±ä¹] ...    â”‚  ä¸€çº§åˆ†ç±»
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ç”µå•†å¹³å°(5)] [è·¨å¢ƒç”µå•†(3)]              â”‚  äºŒçº§åˆ†ç±»
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç»¼åˆç”µå•† > ç”µå•†å¹³å°  å…± 5 ä¸ªæ¨¡æ¿          â”‚  é¢åŒ…å±‘+ç»Ÿè®¡
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚å¡ç‰‡1â”‚ â”‚å¡ç‰‡2â”‚  æ¨¡æ¿ç½‘æ ¼ï¼ˆ2åˆ—ï¼‰          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚å¡ç‰‡3â”‚ â”‚å¡ç‰‡4â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒé€»è¾‘**ï¼š
```typescript
// 1. é¡µé¢åŠ è½½
onMounted(async () => {
  await loadPrimaryCategories()  // åŠ è½½ä¸€çº§åˆ†ç±»
  await loadTemplates(true)       // åŠ è½½æ¨¡æ¿åˆ—è¡¨
})

// 2. ç›‘å¬ä¸€çº§åˆ†ç±»å˜åŒ–
watch(selectedPrimaryCategory, async (newId) => {
  selectedSecondaryCategory.value = ''
  await loadSecondaryCategories(newId)  // åŠ è½½äºŒçº§åˆ†ç±»
  await loadTemplates(true)             // åŠ è½½æ¨¡æ¿
})

// 3. ç›‘å¬äºŒçº§åˆ†ç±»å˜åŒ–
watch(selectedSecondaryCategory, async () => {
  await loadTemplates(true)  // åŠ è½½æ¨¡æ¿
})

// 4. æœç´¢
const onSearch = () => {
  loadTemplates(true)
}
```

**åˆ†é¡µåŠ è½½**ï¼š
- åˆå§‹åŠ è½½ï¼š`currentPage = 1`
- åŠ è½½æ›´å¤šï¼š`currentPage++`ï¼Œè¿½åŠ æ•°æ®
- æ²¡æœ‰æ›´å¤šï¼šæ˜¾ç¤º"æ²¡æœ‰æ›´å¤šäº†"æç¤º

---

## å››ã€ä¿®æ”¹æ–‡ä»¶è¯´æ˜

### 4.1 æ¨¡æ¿è¯¦æƒ…é¡µæ”¹é€ 

**æ–‡ä»¶è·¯å¾„**ï¼š[src/pages/template/detail/index.vue](../src/pages/template/detail/index.vue)

**ä¿®æ”¹å†…å®¹**ï¼š

#### 1. å¢åŠ ç”¨æˆ·è§’è‰²å‚æ•°

```typescript
// æ–°å¢
import type { UserRole } from '@/types/template'

const userRole = ref<UserRole>('merchant')  // é»˜è®¤ä¸ºå•†æˆ·

// onLoad ä¸­æ¥æ”¶å‚æ•°
onLoad((options: any) => {
  const roleParam = options?.userRole
  if (roleParam && ['agent', 'merchant', 'admin'].includes(roleParam)) {
    userRole.value = roleParam as UserRole
  }

  // ...
})
```

#### 2. åº•éƒ¨æ“ä½œæ æ”¹é€ 

**ä¿®æ”¹å‰**ï¼ˆæ‰€æœ‰è§’è‰²æ˜¾ç¤ºä¸€æ ·ï¼‰ï¼š
```vue
<view class="bottom-bar">
  <view class="bar-left">
    <view class="action-btn" @click="toggleFavorite">
      <text class="action-icon">{{ isFavorited ? 'â¤ï¸' : 'ğŸ¤' }}</text>
      <text class="action-text">{{ isFavorited ? 'å·²æ”¶è—' : 'æ”¶è—' }}</text>
    </view>
  </view>
  <view class="bar-right">
    <view class="consult-btn" @click="contactAgent">
      <text class="consult-text">ç«‹å³å’¨è¯¢</text>
    </view>
  </view>
</view>
```

**ä¿®æ”¹å**ï¼ˆæ ¹æ®è§’è‰²æ˜¾ç¤ºä¸åŒå†…å®¹ï¼‰ï¼š
```vue
<view class="bottom-bar">
  <view class="bar-left">
    <!-- å•†æˆ·ç«¯ï¼šæ”¶è—æŒ‰é’® -->
    <view v-if="userRole === 'merchant'" class="action-btn" @click="toggleFavorite">
      <text class="action-icon">{{ isFavorited ? 'â¤ï¸' : 'ğŸ¤' }}</text>
      <text class="action-text">{{ isFavorited ? 'å·²æ”¶è—' : 'æ”¶è—' }}</text>
    </view>
    <!-- ä»£ç†å•†ç«¯ï¼šåˆ†äº«æŒ‰é’® -->
    <view v-else-if="userRole === 'agent'" class="action-btn" @click="shareTemplate">
      <text class="action-icon">ğŸ“¤</text>
      <text class="action-text">åˆ†äº«</text>
    </view>
  </view>
  <view class="bar-right">
    <view v-if="userRole === 'merchant'" class="consult-btn" @click="contactAgent">
      <text class="consult-text">ç«‹å³å’¨è¯¢</text>
    </view>
    <view v-else-if="userRole === 'agent'" class="consult-btn" @click="viewSalesData">
      <text class="consult-text">æŸ¥çœ‹é”€å”®æ•°æ®</text>
    </view>
  </view>
</view>
```

#### 3. ä»£ç†å•†ä¿¡æ¯æ˜¾ç¤º

**ä¿®æ”¹å‰**ï¼š
```vue
<view class="info-footer">
  <text class="agent-info">ä»£ç†å•†ï¼š{{ templateData.baseInfo.agentName }}</text>
  <text class="update-time">{{ templateData.baseInfo.updatedAt }}æ›´æ–°</text>
</view>
```

**ä¿®æ”¹å**ï¼š
```vue
<view class="info-footer">
  <!-- å•†æˆ·ç«¯ï¼šæ˜¾ç¤ºä»£ç†å•†ä¿¡æ¯ -->
  <text v-if="userRole === 'merchant'" class="agent-info">
    ä»£ç†å•†ï¼š{{ templateData.baseInfo.agentName }}
  </text>
  <!-- ä»£ç†å•†ç«¯ï¼šæ˜¾ç¤º"æˆ‘çš„æ¨¡æ¿" -->
  <text v-else-if="userRole === 'agent'" class="agent-info">
    æˆ‘çš„æ¨¡æ¿
  </text>
  <text class="update-time">{{ templateData.baseInfo.updatedAt }}æ›´æ–°</text>
</view>
```

#### 4. æ–°å¢ä»£ç†å•†ä¸“å±æ–¹æ³•

```typescript
// åˆ†äº«æ¨¡æ¿ï¼ˆä»£ç†å•†ç«¯ï¼‰
const shareTemplate = () => {
  uni.showToast({
    title: 'åˆ†äº«åŠŸèƒ½å¼€å‘ä¸­',
    icon: 'none'
  })
}

// æŸ¥çœ‹é”€å”®æ•°æ®ï¼ˆä»£ç†å•†ç«¯ï¼‰
const viewSalesData = () => {
  uni.showToast({
    title: 'æŸ¥çœ‹é”€å”®æ•°æ®',
    icon: 'none'
  })
}
```

---

## äº”ã€è§’è‰²æƒé™è®¾è®¡

### 5.1 æƒé™å¯¹ç…§è¡¨

| åŠŸèƒ½ | å•†æˆ· (merchant) | ä»£ç†å•† (agent) | ç®¡ç†å‘˜ (admin) |
|------|----------------|----------------|----------------|
| æµè§ˆæ¨¡æ¿ | âœ… | âœ… | âœ… |
| æœç´¢æ¨¡æ¿ | âœ… | âœ… | âœ… |
| æŸ¥çœ‹è¯¦æƒ… | âœ… | âœ… | âœ… |
| æ”¶è—åŠŸèƒ½ | âœ… | âŒ | âœ… |
| æŸ¥çœ‹ä»·æ ¼ | âœ… | âŒ | âœ… |
| ç«‹å³å’¨è¯¢ | âœ… | âŒ | âŒ |
| åˆ†äº«æ¨¡æ¿ | âŒ | âœ… | âœ… |
| æŸ¥çœ‹é”€å”®æ•°æ® | âŒ | âœ… | âœ… |
| æŸ¥çœ‹ä»£ç†å•†ä¿¡æ¯ | âœ… | âŒ | âŒ |

### 5.2 å‚æ•°ä¼ é€’

**ä»æ¨¡æ¿ä¸­å¿ƒè·³è½¬åˆ°è¯¦æƒ…é¡µ**ï¼š
```typescript
// å•†æˆ·ç«¯
uni.navigateTo({
  url: `/pages/template/detail/index?id=${template.id}&userRole=merchant`
})

// ä»£ç†å•†ç«¯
uni.navigateTo({
  url: `/pages/template/detail/index?id=${template.id}&userRole=agent`
})
```

---

## å…­ã€API æ¥å£è®¾è®¡ï¼ˆå¾…åç«¯å®ç°ï¼‰

### 6.1 è·å–åˆ†ç±»åˆ—è¡¨

**æ¥å£**ï¼š`GET /api/template/categories`

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "categories": [
      {
        "id": "ecommerce",
        "name": "ç»¼åˆç”µå•†",
        "icon": "ğŸ›’",
        "level": 1,
        "hasData": true,
        "templateCount": 8,
        "children": [
          {
            "id": "ecommerce-platform",
            "name": "ç”µå•†å¹³å°",
            "hasData": true,
            "templateCount": 5
          }
        ]
      }
    ]
  }
}
```

**æ³¨æ„**ï¼šåªè¿”å› `hasData: true` çš„åˆ†ç±»

---

### 6.2 è·å–æ¨¡æ¿åˆ—è¡¨

**æ¥å£**ï¼š`GET /api/template/list`

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| categoryId | string | å¦ | åˆ†ç±»IDï¼Œä¸ä¼ åˆ™æŸ¥è¯¢å…¨éƒ¨ |
| keyword | string | å¦ | æœç´¢å…³é”®è¯ |
| page | number | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| pageSize | number | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |
| sortBy | string | å¦ | æ’åºæ–¹å¼ï¼šprice/rating/sales/newest |

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "templates": [
      {
        "id": 1,
        "name": "ç”µå•†å•†åŸæ¨¡æ¿",
        "categoryId": "ecommerce-platform",
        "categoryPath": "ç»¼åˆç”µå•† > ç”µå•†å¹³å°",
        "price": 1798,
        "rating": 4.9,
        "salesCount": 25,
        "thumbnail": "https://...",
        "tags": ["å•†å“ç®¡ç†", "æ”¯ä»˜ç³»ç»Ÿ"],
        "agentName": "å°å¼ ",
        "agentId": 1,
        "isCollected": false,
        "updatedAt": "2å¤©å‰"
      }
    ],
    "total": 16,
    "page": 1,
    "pageSize": 20,
    "hasMore": false
  }
}
```

---

### 6.3 æ”¶è—/å–æ¶ˆæ”¶è—

**æ¥å£**ï¼š`POST /api/template/collect`

**è¯·æ±‚å‚æ•°**ï¼š
```json
{
  "templateId": 1,
  "isCollected": true
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "æ”¶è—æˆåŠŸ"
}
```

---

## ä¸ƒã€æ•°æ®æµç¨‹å›¾

### 7.1 é¡µé¢åŠ è½½æµç¨‹

```
ç”¨æˆ·æ‰“å¼€æ¨¡æ¿ä¸­å¿ƒé¡µé¢
        â†“
åŠ è½½ä¸€çº§åˆ†ç±»ï¼ˆåªæ˜¾ç¤ºæœ‰æ•°æ®çš„ï¼‰
        â†“
åŠ è½½é»˜è®¤æ¨¡æ¿åˆ—è¡¨ï¼ˆå…¨éƒ¨æˆ–ç¬¬ä¸€ä¸ªåˆ†ç±»ï¼‰
        â†“
ç”¨æˆ·ç‚¹å‡»ä¸€çº§åˆ†ç±»
        â†“
åŠ è½½è¯¥åˆ†ç±»çš„äºŒçº§åˆ†ç±»
        â†“
åŠ è½½è¯¥åˆ†ç±»çš„æ¨¡æ¿åˆ—è¡¨
        â†“
ç”¨æˆ·ç‚¹å‡»äºŒçº§åˆ†ç±»
        â†“
åŠ è½½è¯¥äºŒçº§åˆ†ç±»çš„æ¨¡æ¿åˆ—è¡¨
        â†“
ç”¨æˆ·ç‚¹å‡»æ¨¡æ¿å¡ç‰‡
        â†“
è·³è½¬åˆ°æ¨¡æ¿è¯¦æƒ…é¡µï¼ˆå¸¦userRoleå‚æ•°ï¼‰
```

### 7.2 æœç´¢æµç¨‹

```
ç”¨æˆ·è¾“å…¥æœç´¢å…³é”®è¯
        â†“
ç‚¹å‡»æœç´¢æˆ–å›è½¦
        â†“
è°ƒç”¨æœç´¢æ¥å£ï¼ˆkeywordå‚æ•°ï¼‰
        â†“
æ›´æ–°æ¨¡æ¿åˆ—è¡¨
        â†“
æ˜¾ç¤ºæœç´¢ç»“æœæ•°é‡
```

---

## å…«ã€å¾…å®ŒæˆåŠŸèƒ½

### 8.1 å‰ç«¯å¾…å®ç°

- [ ] æ’åºåŠŸèƒ½ï¼ˆä»·æ ¼ã€è¯„åˆ†ã€é”€é‡ã€æœ€æ–°ï¼‰
- [ ] ç­›é€‰åŠŸèƒ½ï¼ˆä»·æ ¼åŒºé—´ã€è¯„åˆ†åŒºé—´ï¼‰
- [ ] åˆ†äº«åŠŸèƒ½ï¼ˆä»£ç†å•†ç«¯ï¼‰
- [ ] é”€å”®æ•°æ®æŸ¥çœ‹ï¼ˆä»£ç†å•†ç«¯ï¼‰
- [ ] æ”¶è—åˆ—è¡¨é¡µé¢
- [ ] ä¸‹æ‹‰åˆ·æ–°
- [ ] å›¾ç‰‡æ‡’åŠ è½½ä¼˜åŒ–

### 8.2 åç«¯å¾…å¼€å‘

- [ ] åˆ†ç±»ç®¡ç†æ¥å£
- [ ] æ¨¡æ¿åˆ—è¡¨æ¥å£
- [ ] æ¨¡æ¿è¯¦æƒ…æ¥å£
- [ ] æ”¶è—æ¥å£
- [ ] åˆ†äº«æ¥å£
- [ ] é”€å”®æ•°æ®ç»Ÿè®¡æ¥å£

---

## ä¹ã€å¼€å‘æ³¨æ„äº‹é¡¹

### 9.1 åˆ†ç±»æ•°æ®åŠ¨æ€åŠ è½½

âš ï¸ **é‡è¦**ï¼šåˆ†ç±»æ•°æ®å¿…é¡»ä»åç«¯åŠ¨æ€åŠ è½½ï¼Œä¸èƒ½å†™æ­»

**åŸå› **ï¼š
- æœ‰çš„åˆ†ç±»åç«¯æ²¡æœ‰æ•°æ®
- æ˜¾ç¤ºç©ºåˆ†ç±»ä¼šè¯¯å¯¼ç”¨æˆ·
- åç«¯ä¼šæ ¹æ®å®é™…æ¨¡æ¿æ•°æ®åŠ¨æ€ç”Ÿæˆåˆ†ç±»æ ‘

**å‰ç«¯å®ç°**ï¼š
```typescript
// âœ… æ­£ç¡®ï¼šåŠ¨æ€åŠ è½½
const loadCategories = async () => {
  const res = await uni.request({
    url: '/api/template/categories'
  })
  primaryCategories.value = res.data.data.categories
}

// âŒ é”™è¯¯ï¼šå†™æ­»åˆ†ç±»
const primaryCategories = ref([
  { id: 'ecommerce', name: 'ç»¼åˆç”µå•†' },
  { id: 'education', name: 'æ•™è‚²æœåŠ¡' },  // å¯èƒ½æ²¡æœ‰æ•°æ®
  // ...
])
```

### 9.2 è§’è‰²å‚æ•°ä¼ é€’

âš ï¸ **é‡è¦**ï¼šæ‰€æœ‰é¡µé¢è·³è½¬å¿…é¡»ä¼ é€’ `userRole` å‚æ•°

```typescript
// âœ… æ­£ç¡®
uni.navigateTo({
  url: `/pages/template/detail/index?id=${template.id}&userRole=${userRole.value}`
})

// âŒ é”™è¯¯ï¼šå¿˜è®°ä¼ userRole
uni.navigateTo({
  url: `/pages/template/detail/index?id=${template.id}`
})
```

### 9.3 ç©ºçŠ¶æ€å¤„ç†

```vue
<!-- åŠ è½½ä¸­ -->
<view v-if="loading" class="loading-state">
  <text>åŠ è½½ä¸­...</text>
</view>

<!-- ç©ºçŠ¶æ€ -->
<view v-else-if="templateList.length === 0" class="empty-state">
  <text>æš‚æ— æ¨¡æ¿</text>
</view>

<!-- æ­£å¸¸å†…å®¹ -->
<view v-else class="template-list">
  <!-- ... -->
</view>
```

### 9.4 å›¾ç‰‡èµ„æº

å½“å‰ä½¿ç”¨å ä½å›¾ç‰‡æœåŠ¡ï¼š
```typescript
thumbnail: 'https://via.placeholder.com/300x200/4CAF50/FFFFFF?text=ç”µå•†å•†åŸ'
```

**ç”Ÿäº§ç¯å¢ƒ**ï¼šæ›¿æ¢ä¸ºçœŸå®çš„ç¼©ç•¥å›¾URL

---

## åã€æµ‹è¯•æ£€æŸ¥æ¸…å•

### 10.1 åŠŸèƒ½æµ‹è¯•

- [ ] ä¸€çº§åˆ†ç±»åˆ‡æ¢æ­£å¸¸
- [ ] äºŒçº§åˆ†ç±»åˆ‡æ¢æ­£å¸¸
- [ ] æœç´¢åŠŸèƒ½æ­£å¸¸
- [ ] åˆ†é¡µåŠ è½½æ­£å¸¸
- [ ] ç‚¹å‡»å¡ç‰‡è·³è½¬æ­£å¸¸
- [ ] æ”¶è—åŠŸèƒ½æ­£å¸¸ï¼ˆå•†æˆ·ç«¯ï¼‰
- [ ] è§’è‰²æƒé™æ§åˆ¶æ­£ç¡®

### 10.2 UIæµ‹è¯•

- [ ] å¡ç‰‡å¸ƒå±€æ­£å¸¸ï¼ˆ2åˆ—ï¼‰
- [ ] åˆ†ç±»æ æ»šåŠ¨æ­£å¸¸
- [ ] åŠ è½½çŠ¶æ€æ˜¾ç¤ºæ­£å¸¸
- [ ] ç©ºçŠ¶æ€æ˜¾ç¤ºæ­£å¸¸
- [ ] å›¾ç‰‡åŠ è½½æ­£å¸¸

### 10.3 å…¼å®¹æ€§æµ‹è¯•

- [ ] iOSå°ç¨‹åºæ­£å¸¸
- [ ] Androidå°ç¨‹åºæ­£å¸¸
- [ ] ä¸åŒå±å¹•å°ºå¯¸é€‚é…

---

## åä¸€ã€åç»­å¼€å‘å‚è€ƒ

### 11.1 å¼€å‘ä»£ç†å•†ç™»å½•ç‰ˆæœ¬

**éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶**ï¼š
1. [src/pages/template/index.vue](../src/pages/template/index.vue)
   - ä¿®æ”¹ `userRole` é»˜è®¤å€¼ä¸º `'agent'`
   - éšè—æ”¶è—åŠŸèƒ½
   - æ·»åŠ "æŸ¥çœ‹é”€å”®æ•°æ®"å…¥å£

2. [src/components/template/TemplateCard.vue](../src/components/template/TemplateCard.vue)
   - ä¿®æ”¹ `userRole` é»˜è®¤å€¼ä¸º `'agent'`
   - éšè—æ”¶è—æŒ‰é’®

3. [src/pages/template/detail/index.vue](../src/pages/template/detail/index.vue)
   - å·²æ”¯æŒè§’è‰²å‚æ•°ï¼Œæ— éœ€ä¿®æ”¹

### 11.2 å¼€å‘ç®¡ç†å‘˜ç™»å½•ç‰ˆæœ¬

**éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶**ï¼š
1. [src/pages/template/index.vue](../src/pages/template/index.vue)
   - ä¿®æ”¹ `userRole` é»˜è®¤å€¼ä¸º `'admin'`
   - æ˜¾ç¤ºæ‰€æœ‰åŠŸèƒ½ï¼ˆæ”¶è—ã€åˆ†äº«ã€æ•°æ®ç»Ÿè®¡ï¼‰

2. [src/components/template/TemplateCard.vue](../src/components/template/TemplateCard.vue)
   - ä¿®æ”¹ `userRole` é»˜è®¤å€¼ä¸º `'admin'`
   - æ˜¾ç¤ºæ”¶è—æŒ‰é’®å’Œç®¡ç†åŠŸèƒ½

---

## åäºŒã€å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæœ‰çš„åˆ†ç±»ä¸æ˜¾ç¤ºï¼Ÿ

**A**: åˆ†ç±»æ•°æ®æ˜¯ä»åç«¯åŠ¨æ€åŠ è½½çš„ï¼Œåªæœ‰ `hasData: true` çš„åˆ†ç±»æ‰ä¼šæ˜¾ç¤ºã€‚å¦‚æœæŸä¸ªåˆ†ç±»ä¸‹æ²¡æœ‰æ¨¡æ¿ï¼Œåç«¯ä¸ä¼šè¿”å›è¯¥åˆ†ç±»ã€‚

### Q2: å¦‚ä½•æ·»åŠ æ–°çš„åˆ†ç±»ï¼Ÿ

**A**:
1. åç«¯ï¼šåœ¨æ•°æ®åº“ä¸­æ·»åŠ æ–°åˆ†ç±»è®°å½•
2. åç«¯ï¼šä¸ºè¯¥åˆ†ç±»æ·»åŠ è‡³å°‘ä¸€ä¸ªæ¨¡æ¿
3. å‰ç«¯ï¼šæ— éœ€ä¿®æ”¹ä»£ç ï¼Œè‡ªåŠ¨ä»æ¥å£è·å–

### Q3: æ”¶è—åŠŸèƒ½å¦‚ä½•æŒä¹…åŒ–ï¼Ÿ

**A**:
1. è°ƒç”¨æ”¶è—æ¥å£ï¼š`POST /api/template/collect`
2. åç«¯è®°å½•æ”¶è—å…³ç³»åˆ°æ•°æ®åº“
3. é¡µé¢é‡æ–°åŠ è½½æ—¶ä»æ¥å£è·å–æ”¶è—çŠ¶æ€

### Q4: å¦‚ä½•å®ç°æŒ‰ä»·æ ¼æ’åºï¼Ÿ

**A**:
```typescript
const result = getTemplates({
  sortBy: 'price'  // æŒ‰ä»·æ ¼å‡åº
})
```

---

**æ–‡æ¡£ç»´æŠ¤è€…**ï¼šå¼€å‘å›¢é˜Ÿ
**æœ€åæ›´æ–°**ï¼š2026-02-08
