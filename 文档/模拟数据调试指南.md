# 模拟数据调试指南

## 一、如何验证数据是否正确加载

### 1. 打开开发者工具

**小程序开发工具**：
1. 打开微信开发者工具
2. 点击"调试器"
3. 切换到"Console"标签

### 2. 查看控制台日志

#### 模板详情页日志

点击任意模板后，控制台应该显示：

```
=== 模板详情页 onMounted ===
页面参数 options: {id: "1"}
templateId: 1
加载模板详情，templateId: 1
=== loadMockData ===
请求的 templateId: 1
找到的数据: {baseInfo: {name: "在线培训小程序", ...}, banner: [...], modules: [...]}
数据名称: 在线培训小程序
templateData 已赋值
bannerList 已赋值，长度: 3
```

#### 业务员详情页日志

点击任意业务员后，控制台应该显示：

```
加载业务员详情，personId: 1
=== loadMockData (业务员) ===
请求的 detailId: 1
找到的数据: {name: "小张", phone: "138****1234", ...}
业务员姓名: 小张
detailData 已赋值
```

---

## 二、数据对照检查表

### 模板详情页

点击不同的模板，页面应该显示：

| 点击的模板 | 页面显示的名称 | 代理商 | 价格 | 评分 |
|-----------|---------------|--------|------|------|
| 在线培训小程序（ID:1） | 在线培训小程序 | 小张 | 9800 | 4.9 |
| 电商商城模板（ID:2） | 电商商城模板 | 小李 | 12800 | 4.7 |
| 点餐平台（ID:3） | 点餐平台 | 小孙 | 8800 | 4.8 |

**页面元素检查**：
- [x] 模板名称显示正确
- [x] 轮播图/视频显示（3张轮播）
- [x] 基本信息（价格、评分、标签）
- [x] 代理商信息
- [x] 展示模块（核心特色、功能概览等）
- [x] 收藏和咨询按钮

### 业务员详情页

点击不同的业务员，页面应该显示：

| 点击的业务员 | 页面显示的姓名 | 销售额 | 单数 | 评分 | 当前排名 |
|-------------|---------------|--------|------|------|---------|
| 小张（ID:1） | 小张 | 12.8万 | 15 | 4.8 | 1 |
| 小李（ID:2） | 小李 | 9.6万 | 12 | 4.6 | 2 |
| 小孙（ID:3） | 小孙 | 8.5万 | 10 | 4.9 | 3 |
| 小周（ID:4） | 小周 | 6.4万 | 8 | 4.5 | 4 |
| 小王（ID:5） | 小王 | 5.6万 | 7 | 4.7 | 5 |

**页面元素检查**：
- [x] 姓名和手机号
- [x] 当前排名和趋势
- [x] 销售额、单数、商户数
- [x] 评分和评价数
- [x] 排名趋势图表
- [x] 销售趋势图表
- [x] 销售记录列表
- [x] 用户评价列表

---

## 三、常见问题排查

### 问题1：点击后页面空白

**可能原因**：
- templateId 或 detailId 没有正确获取
- 数据没有正确赋值

**排查步骤**：
1. 查看控制台，检查 `templateId` 或 `detailId` 的值
2. 检查是否有"找到的数据"日志
3. 检查是否有"已赋值"日志

**解决方法**：
- 如果 ID 是 0 或 NaN：检查跳转链接是否正确传递了参数
- 如果没有"找到的数据"：检查 mockTemplates 或 mockPersons 是否包含该 ID

### 问题2：显示的名称不正确

**可能原因**：
- 模拟数据中的 ID 和名称不匹配

**排查步骤**：
1. 控制台查看"数据名称"或"业务员姓名"
2. 对比 [模拟数据对照表.md](./模拟数据对照表.md)

**解决方法**：
- 确保模拟数据的 ID 和名称对应关系正确

### 问题3：轮播图不显示

**可能原因**：
- bannerList 没有正确赋值
- 图片URL无效

**排查步骤**：
1. 控制台查看"bannerList 已赋值，长度: X"
2. 长度应该是 3（模板详情页）

**解决方法**：
- 检查网络请求是否成功
- 尝试手动在浏览器打开图片URL

### 问题4：图表不显示

**可能原因**：
- rankHistory 或 salesTrend 数据为空
- Canvas初始化时机问题

**排查步骤**：
1. 检查控制台是否有 Canvas 相关错误
2. 确认 detailData 中有 rankHistory 和 salesTrend 数组

**解决方法**：
- 数据加载完成后，等待 nextTick 再绘制图表
- 代码中已经处理：`await nextTick()`

---

## 四、手动测试步骤

### 测试1：模板详情页

1. 打开首页或排行榜页面
2. 切换到"模板排行"
3. 点击"在线培训小程序"（第1名）
4. 检查详情页：
   - 标题显示"在线培训小程序"
   - 轮播图有3张
   - 代理商显示"小张"
   - 价格显示"9800"
   - 评分显示"4.9"

5. 返回，点击"电商商城模板"（第2名）
6. 检查详情页：
   - 标题显示"电商商城模板"
   - 代理商显示"小李"

### 测试2：业务员详情页

1. 打开首页或排行榜页面
2. 切换到"业务员排行"
3. 点击"小张"（第1名）
4. 检查详情页：
   - 姓名显示"小张"
   - 当前排名显示"第1名"
   - 销售额显示"12.8万"
   - 单数显示"15"
   - 趋势显示"↑ 2"

5. 返回，点击"小李"（第2名）
6. 检查详情页：
   - 姓名显示"小李"
   - 当前排名显示"第2名"
   - 销售额显示"9.6万"

---

## 五、模拟数据文件位置

### 模板详情页
**文件**：[src/pages/template/detail/index.vue](../src/pages/template/detail/index.vue)
- `loadMockData()` 函数：第397-648行
- 包含3个模板的完整数据（ID: 1, 2, 3）

### 业务员详情页
**文件**：[src/pages/ranking/detail/index.vue](../src/pages/ranking/detail/index.vue)
- `loadMockData()` 函数：第437-676行
- 包含5个业务员的完整数据（ID: 1, 2, 3, 4, 5）

### 排行榜页面
**文件**：[src/pages/ranking/index.vue](../src/pages/ranking/index.vue)
- `salespersonData`：第236-292行（业务员列表）
- `templateData`：第295-332行（模板列表）

---

## 六、快速修复

### 如果数据仍然不显示

**临时解决方案**：在页面onMounted后强制刷新

```typescript
onMounted(() => {
  // 获取页面参数
  const pages = getCurrentPages()
  const currentPage = pages[pages.length - 1] as any
  const options = currentPage?.options || {}

  templateId.value = parseInt(options.id) || 1  // 默认ID改为1

  // 强制使用模拟数据
  loadMockData()

  // 延迟刷新页面
  setTimeout(() => {
    console.log('强制刷新数据')
  }, 100)
})
```

---

## 七、联系支持

如果以上方法都无法解决问题，请提供：
1. 控制台完整日志截图
2. 点击的具体项目（哪个模板/哪个业务员）
3. 页面显示的截图
4. 小程序开发工具版本

---

**文档版本**：v1.0
**最后更新**：2026-02-08
